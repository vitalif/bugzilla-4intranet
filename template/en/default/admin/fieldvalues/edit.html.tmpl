[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Bug Tracking System.
  #
  # Contributor(s): Max Kanat-Alexander <mkanat@bugzilla.org>
  #%]

[%# INTERFACE:
  # value: Bugzilla::Field::Choice; The field value we are editing.
  # field: Bugzilla::Field; The field this value belongs to.
  #%]

[% title = BLOCK %]
  Edit Value '[% value.name FILTER html %]' for the 
  '[% field.description FILTER html %]' ([% field.name FILTER html %]) field
[% END %]
[% PROCESS global/header.html.tmpl
  title = title
%]

<form method="post" action="editvalues.cgi">
  <table border="0" cellpadding="4" cellspacing="0">

    <tr>
      <th valign="top" align="left">
        <label for="value_new">Field Value:</label>
      </th>
      <td>
        [% IF value.is_static %]
          <input type="hidden" name="value_new" id="value_new"
                 value="[% value.name FILTER html %]" />
            [%- value.name FILTER html %]
        [% ELSE %]
          <input id="value_new" name="value_new" size="100"
                 maxlength="[% constants.MAX_FIELD_VALUE_SIZE FILTER none %]"
                 value="[% value.name FILTER html %]" />
        [% END %]
      </td>
    </tr>
    <tr>
      <th align="left"><label for="sortkey">Sortkey:</label></th>
      <td><input id="sortkey" size="6" maxlength="6" name="sortkey" 
                 value="[%- value.sortkey FILTER html %]" /></td>
    </tr>
    [% IF field.name == "bug_status" %]
      <tr>
        <th align="left"><label for="is_open">Is open:</label></th>
        <td>
          <input id="is_open" name="is_open" type="checkbox" value="1"
            [%+ 'checked="checked"' IF value.is_open %] />
        </td>
      </tr>
      <tr>
        <th align="left"><label for="is_assigned">Is it an assigned state?</label></th>
        <td>
          <input id="is_assigned" name="is_assigned" type="checkbox" value="1"
            [%+ 'checked="checked"' IF value.is_assigned %] />
        </td>
      </tr>
      <tr>
        <th align="left"><label for="is_confirmed">Is it a confirmed state?</label></th>
        <td>
          <input id="is_confirmed" name="is_confirmed" type="checkbox" value="1"
            [%+ 'checked="checked"' IF value.is_confirmed %] />
        </td>
      </tr>
    [% END %]
    [% IF field.value_field && !value.is_static %]
      <tr>
        <th align="left">
          Only appears when [%+ field.value_field.description FILTER html %] is set to:
        </th>
        <td>
          <a href="javascript:void(0)" onclick="document.getElementById('visibility_value_id').selectedIndex=-1">clear options</a> to make this value always appear
        </td>
      </tr>
      <tr>
        <td></td><td>
          <select name="visibility_value_id[]" id="visibility_value_id" multiple="multiple" size="15">
            [% FOREACH field_value = field.value_field.legal_values %]
              [% NEXT IF field_value.name == '' %]
              <option value="[% field_value.id FILTER none %]" [% ' selected="selected"' IF value.has_visibility_value(field_value.id, 0) %]>
                [%- field_value.name FILTER html -%]
              </option>
            [% END %]
          </select>
        </td>
      </tr>
    [% END %]
    <tr>
      <th align="left"><label for="isactive">Enabled for [% terms.bugs %]:</label></th>
      <td>
        <input id="isactive" name="isactive" type="checkbox" value="1"
          [%+ 'checked="checked"' IF value.isactive %]
          [%+ 'disabled="disabled"' IF value.is_default OR value.is_static %] />
        [% IF value.is_default %]
          This value is selected as default in the parameters for this field. It cannot be disabled.
        [% ELSIF value.is_static %]
          This value is non-deletable and cannot be disabled.
        [% END %]
      </td>
    </tr>
    [% Hook.process('fields') %]
  </table>
  <input type="hidden" name="value" value="[% value.name FILTER html %]" />
  <input type="hidden" name="action" value="update" />
  <input type="hidden" name="field" value="[% field.name FILTER html %]" />
  <input type="hidden" name="token" value="[% token FILTER html %]" />
  <input type="submit" id="update" value="Save Changes" />
</form>

[% PROCESS admin/fieldvalues/footer.html.tmpl
  no_edit_link = 1 %]

[% PROCESS global/footer.html.tmpl %]
