[%# This Source Code Form is subject to the terms of the Mozilla Public
  # License, v. 2.0. If a copy of the MPL was not distributed with this
  # file, You can obtain one at http://mozilla.org/MPL/2.0/.
  #
  # This Source Code Form is "Incompatible With Secondary Licenses", as
  # defined by the Mozilla Public License, v. 2.0.
  #%]

[%# INTERFACE:
  # bug_id: number; the ID of the bug that was changed/checked.
  #
  # type: string; the type of change/check that was made: "bug" when a bug
  #   is changed, "dupe" when a duplication notation is added to a bug,
  #   and "dep" when a bug is checked for changes to its dependencies.
  #%]

[% UNLESS header_done %]
  [% PROCESS bug/process/header.html.tmpl %]
[% END %]

[% DEFAULT type="bug" %]

[% Link = BLOCK %][% "$terms.Bug $bug_id" FILTER bug_link(bug_id) %][% END %]
[% link = BLOCK %][% "$terms.bug $bug_id" FILTER bug_link(bug_id) %][% END %]

[%
  statuses = {
    '+' => "granted"
    '-' => "denied"
    'X' => "canceled"
    '?' => "requested"
  };
  title = {
    'bug' => "Changes submitted for $link" ,
    'dupe' => "Duplicate notation added to $link" ,
    'dep' => "Checking for dependency changes on $link" ,
    'created' => "$Link has been added to the database" ,
    'move'    => "$Link has been moved to another database" ,
    'flag'    => "Flag $new_flag.name " _ statuses.${new_flag.status} ,
  }
%]

[% Hook.process('title') %]

<dl>
  <dt>[% title.$type %]</dt>
  <dd>
    [% PROCESS "bug/process/bugmail.html.tmpl" mailing_bugid = bug_id %]
    [%# Links to more information about the changed bug. %]
    [% Hook.process("links") %]
  </dd>
</dl>
